{% extends "base.html" %}
{% block content %}
<div class="lecture">
  <h1>JOIN</h1>

  <p>
    <code>JOIN</code> –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —Å—Ç—Ä–æ–∫–∏ –∏–∑ –¥–≤—É—Ö (–∏ –±–æ–ª–µ–µ) —Ç–∞–±–ª–∏—Ü –ø–æ —É—Å–ª–æ–≤–∏—é —Å–≤—è–∑–∏.
    –û–±—ã—á–Ω–æ —É—Å–ª–æ–≤–∏–µ —Å–≤—è–∑–∏ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: <code>ON a.id = b.a_id</code>.
  </p>

  <div class="callout callout--note">
    <div class="callout__title">–ß—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å</div>
    <p class="muted">
      –í JOIN –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –¥–≤–µ —á–∞—Å—Ç–∏: <strong>—Ç–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</strong> (INNER/LEFT/...)
      –∏ <strong>—É—Å–ª–æ–≤–∏–µ ON</strong>. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ON –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø JOIN.
    </p>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 1 ‚Äî INNER JOIN</h2>
  <p>
    <code>INNER JOIN</code> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –Ω–∞—à–ª–∞—Å—å –ø–∞—Ä–∞ –ø–æ —É—Å–ª–æ–≤–∏—é <code>ON</code>.
    –ï—Å–ª–∏ –ø–∞—Ä—ã –Ω–µ—Ç ‚Äî —Å—Ç—Ä–æ–∫–∞ –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td><td>done</td></tr>
          <tr><td>11</td><td>1</td><td>80</td><td>new</td></tr>
          <tr><td>12</td><td>2</td><td>50</td><td>done</td></tr>
          <tr><td>13</td><td>NULL</td><td>70</td><td>new</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT u.name, o.id AS order_id, o.total, o.status
FROM users u
JOIN orders o ON o.user_id = u.id
ORDER BY u.id, o.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th><th>order_id</th><th>total</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>10</td><td>120</td><td>done</td></tr>
          <tr><td>Alice</td><td>11</td><td>80</td><td>new</td></tr>
          <tr><td>Bob</td><td>12</td><td>50</td><td>done</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="callout callout--note">
    <div class="callout__title">–ü–æ—á–µ–º—É order 13 –Ω–µ –ø–æ–ø–∞–ª?</div>
    <p class="muted">
      –ü–æ—Ç–æ–º—É —á—Ç–æ <code>orders.user_id</code> = <code>NULL</code>, –∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ <code>NULL = ...</code> –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å—Ç–∏–Ω–Ω–æ.
      –°–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ <code>ON o.user_id = u.id</code> –Ω–µ—Ç.
    </p>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 2 ‚Äî LEFT JOIN</h2>
  <p>
    <code>LEFT JOIN</code> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <strong>–≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã</strong> –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞.
    –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–µ—Ç ‚Äî –ø–æ–ª—è —Å–ø—Ä–∞–≤–∞ –±—É–¥—É—Ç <code>NULL</code>.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td><td>done</td></tr>
          <tr><td>11</td><td>1</td><td>80</td><td>new</td></tr>
          <tr><td>12</td><td>2</td><td>50</td><td>done</td></tr>
          <tr><td>13</td><td>NULL</td><td>70</td><td>new</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT u.name, o.id AS order_id, o.total
FROM users u
LEFT JOIN orders o ON o.user_id = u.id
ORDER BY u.id, o.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th><th>order_id</th><th>total</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>10</td><td>120</td></tr>
          <tr><td>Alice</td><td>11</td><td>80</td></tr>
          <tr><td>Bob</td><td>12</td><td>50</td></tr>
          <tr><td>Carol</td><td>NULL</td><td>NULL</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 3 ‚Äî ON vs WHERE –≤ LEFT JOIN</h2>
  <p>
    –≠—Ç–æ —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ª–æ–≤—É—à–∫–∞: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ –≤ <code>WHERE</code> ‚Äú—É–±–∏–≤–∞–µ—Ç‚Äù —Å—Ç—Ä–æ–∫–∏ –±–µ–∑ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π.
  </p>

  <h3>3.1 –£—Å–ª–æ–≤–∏–µ –≤ WHERE (–ø–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ ‚Äú–≤—Å–µ —Å–ª–µ–≤–∞ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è‚Äù)</h3>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td><td>done</td></tr>
          <tr><td>11</td><td>1</td><td>80</td><td>new</td></tr>
          <tr><td>12</td><td>2</td><td>50</td><td>done</td></tr>
          <tr><td>13</td><td>NULL</td><td>70</td><td>new</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT u.name, o.id, o.status
FROM users u
LEFT JOIN orders o ON o.user_id = u.id
WHERE o.status = 'done'
ORDER BY u.id, o.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th><th>id</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>10</td><td>done</td></tr>
          <tr><td>Bob</td><td>12</td><td>done</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="callout callout--warning">
    <div class="callout__title">‚ö† –ü–æ—á–µ–º—É –∏—Å—á–µ–∑–ª–∞ Carol?</div>
    <p>
      –£ Carol –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤ ‚Üí —Å–ø—Ä–∞–≤–∞ –ø–æ–ª—è <code>NULL</code>.
      –£—Å–ª–æ–≤–∏–µ <code>o.status = 'done'</code> –ª–æ–∂–Ω–æ –¥–ª—è <code>NULL</code> ‚Üí —Å—Ç—Ä–æ–∫–∞ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∞—Å—å.
    </p>
  </div>

  <h3>3.2 –£—Å–ª–æ–≤–∏–µ –≤ ON (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)</h3>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td><td>done</td></tr>
          <tr><td>11</td><td>1</td><td>80</td><td>new</td></tr>
          <tr><td>12</td><td>2</td><td>50</td><td>done</td></tr>
          <tr><td>13</td><td>NULL</td><td>70</td><td>new</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT u.name, o.id, o.status
FROM users u
LEFT JOIN orders o
  ON o.user_id = u.id
 AND o.status = 'done'
ORDER BY u.id, o.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th><th>id</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>10</td><td>done</td></tr>
          <tr><td>Bob</td><td>12</td><td>done</td></tr>
          <tr><td>Carol</td><td>NULL</td><td>NULL</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 4 ‚Äî ‚Äú–≤—Å–µ —Å–ø—Ä–∞–≤–∞‚Äù (–∞–Ω–∞–ª–æ–≥ RIGHT JOIN)</h2>
  <p>
    –í SQLite –ø—Ä–æ—â–µ –º—ã—Å–ª–∏—Ç—å —Ç–∞–∫: –µ—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äú–≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ orders + –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –µ—Å–ª–∏ –µ—Å—Ç—å‚Äù ‚Äî
    –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π <code>orders</code> –ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ–π –≤ <code>LEFT JOIN</code>.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td><td>done</td></tr>
          <tr><td>11</td><td>1</td><td>80</td><td>new</td></tr>
          <tr><td>12</td><td>2</td><td>50</td><td>done</td></tr>
          <tr><td>13</td><td>NULL</td><td>70</td><td>new</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT o.id, o.total, u.name
FROM orders o
LEFT JOIN users u ON u.id = o.user_id
ORDER BY o.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>total</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>120</td><td>Alice</td></tr>
          <tr><td>11</td><td>80</td><td>Alice</td></tr>
          <tr><td>12</td><td>50</td><td>Bob</td></tr>
          <tr><td>13</td><td>70</td><td>NULL</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 5 ‚Äî CROSS JOIN</h2>
  <p>
    <code>CROSS JOIN</code> —Å–æ–µ–¥–∏–Ω—è–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É A —Å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π B (–¥–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ).
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ, –Ω–æ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å, —á—Ç–æ–±—ã —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç—å –æ–≥—Ä–æ–º–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">statuses</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>status</th></tr></thead>
        <tbody>
          <tr><td>new</td></tr>
          <tr><td>done</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT u.name, s.status
FROM users u
CROSS JOIN statuses s
ORDER BY u.id, s.status;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th><th>status</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>done</td></tr>
          <tr><td>Alice</td><td>new</td></tr>
          <tr><td>Bob</td><td>done</td></tr>
          <tr><td>Bob</td><td>new</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="callout callout--warning">
    <div class="callout__title">‚ö† –û—Å—Ç–æ—Ä–æ–∂–Ω–æ</div>
    <p>
      –ü—Ä–∏ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—Ç—ë—Ç –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤.
      –í —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ —Ç–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç —Å–∏–ª—å–Ω–æ –≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä.
    </p>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 6 ‚Äî JOIN + –∞–≥—Ä–µ–≥–∞—Ç—ã (GROUP BY)</h2>
  <p class="muted">
    –ß–∞—Å—Ç—ã–π —Ä–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å: –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –∏ —Å—É–º–º—É –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td></tr>
          <tr><td>11</td><td>1</td><td>80</td></tr>
          <tr><td>12</td><td>2</td><td>50</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT
  u.name,
  COUNT(o.id) AS orders_count,
  COALESCE(SUM(o.total), 0) AS total_sum
FROM users u
LEFT JOIN orders o ON o.user_id = u.id
GROUP BY u.id, u.name
ORDER BY u.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th><th>orders_count</th><th>total_sum</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>2</td><td>200</td></tr>
          <tr><td>Bob</td><td>1</td><td>50</td></tr>
          <tr><td>Carol</td><td>0</td><td>0</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="callout callout--tip">
    <div class="callout__title">üí° –ü–æ—á–µ–º—É COALESCE?</div>
    <p>
      –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –∑–∞–∫–∞–∑–æ–≤ <code>SUM(o.total)</code> –±—É–¥–µ—Ç <code>NULL</code>, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ 0:
      <code>COALESCE(SUM(...), 0)</code>.
    </p>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 7 ‚Äî Anti-join (–Ω–∞–π—Ç–∏ ‚Äú–±–µ–∑ –ø–∞—Ä—ã‚Äù)</h2>
  <p>
    –ó–∞–¥–∞—á–∞: –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö <strong>–Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</strong>.
    –î–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ <code>LEFT JOIN</code> –∏ –ø—Ä–æ–≤–µ—Ä–∫—É <code>IS NULL</code> –ø–æ –∫–ª—é—á—É –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">users</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td></tr>
          <tr><td>2</td><td>Bob</td></tr>
          <tr><td>3</td><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="result">
    <div class="result__title">orders</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>user_id</th><th>total</th></tr></thead>
        <tbody>
          <tr><td>10</td><td>1</td><td>120</td></tr>
          <tr><td>11</td><td>1</td><td>80</td></tr>
          <tr><td>12</td><td>2</td><td>50</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT u.name
FROM users u
LEFT JOIN orders o ON o.user_id = u.id
WHERE o.id IS NULL;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>name</th></tr></thead>
        <tbody>
          <tr><td>Carol</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <h2>–ü—Ä–∏–º–µ—Ä 8 ‚Äî Self JOIN (—Ç–∞–±–ª–∏—Ü–∞ —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å–∞–º–∞ —Å —Å–æ–±–æ–π)</h2>
  <p class="muted">
    –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–π: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä—ã.
  </p>

  <p class="muted">–î–∞–Ω–Ω—ã–µ:</p>
  <div class="result">
    <div class="result__title">employees</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>id</th><th>name</th><th>manager_id</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>Alice</td><td>NULL</td></tr>
          <tr><td>2</td><td>Bob</td><td>1</td></tr>
          <tr><td>3</td><td>Carol</td><td>1</td></tr>
          <tr><td>4</td><td>Dave</td><td>2</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <p class="muted">–ó–∞–ø—Ä–æ—Å:</p>
  <pre class="sql"><code>SELECT e.name AS employee, m.name AS manager
FROM employees e
LEFT JOIN employees m ON m.id = e.manager_id
ORDER BY e.id;</code></pre>

  <div class="result">
    <div class="result__title">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>employee</th><th>manager</th></tr></thead>
        <tbody>
          <tr><td>Alice</td><td>NULL</td></tr>
          <tr><td>Bob</td><td>Alice</td></tr>
          <tr><td>Carol</td><td>Alice</td></tr>
          <tr><td>Dave</td><td>Bob</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <hr>

  <h2>–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ JOIN</h2>
  <div class="callout callout--warning">
    <div class="callout__title">‚ö† –û—à–∏–±–∫–∏ –Ω–æ–≤–∏—á–∫–æ–≤</div>
    <ul class="mistakes">
      <li><strong>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ —Å–≤—è–∑–∏</strong> (<code>ON</code> –Ω–µ –ø–æ –∫–ª—é—á–∞–º) ‚Üí ‚Äú–ª–∏—à–Ω–∏–µ‚Äù —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</li>
      <li><strong>–ó–∞–±—ã—Ç—å –∞–ª–∏–∞—Å—ã</strong> –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ ‚Üí –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∏–∑ –∫–∞–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã –ø–æ–ª–µ.</li>
      <li><strong>–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤—É—é —Ç–∞–±–ª–∏—Ü—É —á–µ—Ä–µ–∑ WHERE</strong> –ø—Ä–∏ <code>LEFT JOIN</code> ‚Üí –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –≤ INNER JOIN.</li>
      <li><strong>–°–ª—É—á–∞–π–Ω—ã–π CROSS JOIN</strong> ‚Üí –≤–∑—Ä—ã–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ –∏ —Ç–æ—Ä–º–æ–∑–∞.</li>
      <li><strong>–î—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–∏ JOIN</strong>: –µ—Å–ª–∏ —Å–ø—Ä–∞–≤–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –Ω–∞ –æ–¥–Ω—É —Å–ª–µ–≤–∞ ‚Äî —Å—Ç—Ä–æ–∫ —Å—Ç–∞–Ω–µ—Ç –±–æ–ª—å—à–µ (—ç—Ç–æ –Ω–µ –±–∞–≥).</li>
    </ul>
  </div>

  <hr>

  <h2>–ò—Ç–æ–≥–æ</h2>
  <ul>
    <li><code>INNER JOIN</code> ‚Äî —Ç–æ–ª—å–∫–æ —Å–æ–≤–ø–∞–≤—à–∏–µ –ø–∞—Ä—ã.</li>
    <li><code>LEFT JOIN</code> ‚Äî –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å–ª–µ–≤–∞ + —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞ (–∏–ª–∏ NULL).</li>
    <li>–í <code>LEFT JOIN</code> —É—Å–ª–æ–≤–∏—è –Ω–∞ –ø—Ä–∞–≤—É—é —Ç–∞–±–ª–∏—Ü—É —á–∞—Å—Ç–æ –Ω–∞–¥–æ –ø–∏—Å–∞—Ç—å –≤ <code>ON</code>, –∞ –Ω–µ –≤ <code>WHERE</code>.</li>
    <li>JOIN –æ—Ç–ª–∏—á–Ω–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –∞–≥—Ä–µ–≥–∞—Ç–∞–º–∏ (<code>GROUP BY</code>).</li>
    <li>Anti-join: <code>LEFT JOIN</code> + <code>WHERE right.id IS NULL</code> ‚Üí ‚Äú–Ω–∞–π—Ç–∏ –±–µ–∑ –ø–∞—Ä—ã‚Äù.</li>
  </ul>
</div>
{% endblock %}
